{% extends "base.html" %}
{% load static %}

{% block title %}Delete User | RDFS{% endblock %}

{% block content %}
<style>
/* ===============================
   RDFS DELETE USER - ULTRA COMPACT
================================ */
:root{
  --rdfs-blue-dark:#0a1931;
  --rdfs-blue:#112d4e;
  --rdfs-danger:#e53e3e;
  --rdfs-danger-dark:#c53030;
  --rdfs-danger-light:#fed7d7;
  
  --rdfs-warning:#ed8936;
  --rdfs-warning-light:#feebc8;
  
  --rdfs-bg:#f8fafc;
  --rdfs-card:#ffffff;
  
  --rdfs-text:#1e293b;
  --rdfs-muted:#475569;
  
  --rdfs-border:#e2e8f0;
  --rdfs-border-dark:#cbd5e1;
  --rdfs-radius:12px;
  
  --rdfs-shadow-sm:0 3px 8px rgba(0,0,0,0.05);
  --rdfs-shadow-md:0 6px 18px rgba(10, 25, 49, 0.08);
  --rdfs-shadow-danger:0 4px 14px rgba(229, 62, 62, 0.15);
  
  --rdfs-transition:all 0.2s ease;
}

/* ULTRA COMPACT PAGE */
.rdfs-delete-page{
  min-height:60vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:1rem;
  background:var(--rdfs-bg);
}

/* ULTRA COMPACT CARD */
.rdfs-delete-card{
  position:relative;
  max-width:380px;
  width:100%;
  background:var(--rdfs-card);
  border-radius:var(--rdfs-radius);
  padding:1.5rem 1.25rem;
  text-align:center;
  border:1px solid var(--rdfs-border);
  box-shadow:var(--rdfs-shadow-md);
}

/* DANGER STRIP */
.rdfs-danger-strip{
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:3px;
  background:linear-gradient(90deg, var(--rdfs-danger), var(--rdfs-danger-dark));
  border-radius:var(--rdfs-radius) var(--rdfs-radius) 0 0;
}

/* COMPACT ICON */
.rdfs-delete-icon{
  font-size:1.75rem;
  color:var(--rdfs-danger);
  margin-bottom:0.75rem;
}

/* TITLE */
.rdfs-delete-title{
  font-weight:700;
  color:var(--rdfs-danger);
  margin-bottom:0.25rem;
  font-size:1.25rem;
}

.rdfs-delete-subtitle{
  color:var(--rdfs-muted);
  font-size:0.85rem;
  margin-bottom:1rem;
  font-weight:500;
}

/* ULTRA COMPACT USER INFO */
.rdfs-user-info{
  background:#fef2f2;
  border-radius:8px;
  padding:0.75rem;
  margin:0 0 1rem;
  border:1px solid rgba(229, 62, 62, 0.1);
  text-align:left;
  position:relative;
}

.rdfs-user-info::before{
  content:'';
  position:absolute;
  left:0;
  top:0;
  bottom:0;
  width:2px;
  background:var(--rdfs-danger);
}

.rdfs-user-detail{
  display:flex;
  align-items:center;
  margin-bottom:0.375rem;
  font-size:0.8rem;
}

.rdfs-user-detail:last-child{
  margin-bottom:0;
}

.rdfs-user-label{
  flex:0 0 60px;
  color:var(--rdfs-muted);
  font-weight:500;
  display:flex;
  align-items:center;
  gap:0.25rem;
}

.rdfs-user-value{
  flex:1;
  color:var(--rdfs-text);
  font-weight:600;
}

.rdfs-user-badge{
  display:inline-block;
  padding:0.1rem 0.4rem;
  background:var(--rdfs-warning-light);
  color:var(--rdfs-warning);
  border-radius:10px;
  font-size:0.65rem;
  font-weight:600;
  margin-left:0.4rem;
}

/* COMPACT WARNING */
.rdfs-warning-box{
  background:var(--rdfs-warning-light);
  border-radius:6px;
  padding:0.75rem;
  margin:0 0 1rem;
  border:1px solid rgba(237, 137, 54, 0.2);
  text-align:left;
}

.rdfs-warning-title{
  display:flex;
  align-items:center;
  gap:0.375rem;
  color:var(--rdfs-warning);
  font-weight:600;
  margin-bottom:0.25rem;
  font-size:0.8rem;
}

.rdfs-warning-text{
  color:var(--rdfs-muted);
  font-size:0.75rem;
  line-height:1.3;
  margin:0;
}

/* COMPACT FORM ACTIONS */
.rdfs-form-actions{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:0.5rem;
  margin-top:1rem;
}

/* COMPACT DELETE BUTTON */
.rdfs-delete-btn{
  background:linear-gradient(
    135deg,
    var(--rdfs-danger),
    var(--rdfs-danger-dark)
  );
  border:none;
  color:#fff;
  font-weight:600;
  border-radius:6px;
  padding:0.6rem 0.875rem;
  font-size:0.85rem;
  transition:var(--rdfs-transition);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:0.375rem;
  cursor:pointer;
  grid-column:2;
}

.rdfs-delete-btn:hover{
  background:linear-gradient(
    135deg,
    var(--rdfs-danger-dark),
    #9b2c2c
  );
  box-shadow:var(--rdfs-shadow-danger);
  transform:translateY(-1px);
}

/* COMPACT CANCEL BUTTON */
.rdfs-secondary-btn{
  background:white;
  border:1px solid var(--rdfs-border-dark);
  color:var(--rdfs-muted);
  font-weight:600;
  border-radius:6px;
  padding:0.6rem 0.875rem;
  font-size:0.85rem;
  transition:var(--rdfs-transition);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:0.375rem;
  cursor:pointer;
  text-decoration:none;
  grid-column:1;
}

.rdfs-secondary-btn:hover{
  background:var(--rdfs-blue-dark);
  border-color:var(--rdfs-blue-dark);
  color:white;
  transform:translateY(-1px);
  box-shadow:var(--rdfs-shadow-sm);
}

/* RESPONSIVE */
@media (max-width: 480px){
  .rdfs-delete-card{
    padding:1.25rem;
    max-width:100%;
  }
  
  .rdfs-form-actions{
    grid-template-columns:1fr;
    gap:0.375rem;
  }
  
  .rdfs-delete-btn,
  .rdfs-secondary-btn{
    grid-column:1;
    width:100%;
  }
  
  .rdfs-user-detail{
    flex-direction:column;
    align-items:flex-start;
    gap:0.125rem;
  }
  
  .rdfs-user-label{
    flex:none;
    width:100%;
  }
}
</style>

<div class="container rdfs-delete-page">
  <div class="rdfs-delete-card">
    
    <!-- DANGER STRIP -->
    <div class="rdfs-danger-strip"></div>
    
    <!-- ICON -->
    <div class="rdfs-delete-icon">
      <i class="fas fa-user-slash"></i>
    </div>

    <!-- TITLE -->
    <h3 class="rdfs-delete-title">
      Delete Account
    </h3>
    <p class="rdfs-delete-subtitle">
      This action cannot be undone
    </p>

    <!-- COMPACT USER INFO -->
    <div class="rdfs-user-info">
      <div class="rdfs-user-detail">
        <span class="rdfs-user-label">
          <i class="fas fa-user"></i>User
        </span>
        <span class="rdfs-user-value">{{ user_obj.username }}</span>
      </div>
      
      <div class="rdfs-user-detail">
        <span class="rdfs-user-label">
          <i class="fas fa-shield-alt"></i>Role
        </span>
        <span class="rdfs-user-value">
          {{ user_obj.get_role_display }}
          <span class="rdfs-user-badge">{{ user_obj.role|upper }}</span>
        </span>
      </div>
      
      <div class="rdfs-user-detail">
        <span class="rdfs-user-label">
          <i class="fas fa-calendar"></i>Joined
        </span>
        <span class="rdfs-user-value">{{ user_obj.date_joined|date:"M d, Y" }}</span>
      </div>
    </div>

    <!-- COMPACT WARNING -->
    <div class="rdfs-warning-box">
      <div class="rdfs-warning-title">
        <i class="fas fa-exclamation-triangle"></i>
        Irreversible Action
      </div>
      <p class="rdfs-warning-text">
        All data will be permanently deleted including records and history.
      </p>
    </div>

    <!-- FORM -->
    <form method="POST" id="deleteForm">
      {% csrf_token %}
      
      <div class="rdfs-form-actions">
        
        <!-- CANCEL BUTTON -->
        <a href="{% url 'accounts:manage_users' %}" 
           class="rdfs-secondary-btn">
          <i class="fas fa-times"></i>
          Cancel
        </a>

        <!-- DELETE BUTTON -->
        <button type="submit"
                class="rdfs-delete-btn">
          <i class="fas fa-trash-alt"></i>
          Delete Account
        </button>

      </div>
    </form>

  </div>
</div>

<!-- MINIMAL JAVESCRIPT -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Simple loading state on form submission
  const deleteForm = document.getElementById('deleteForm');
  const deleteButton = deleteForm?.querySelector('.rdfs-delete-btn');
  
  if (deleteForm && deleteButton) {
    deleteForm.addEventListener('submit', function() {
      // Show loading state
      deleteButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Deleting...';
      deleteButton.disabled = true;
    });
  }
});
</script>
{% endblock %}